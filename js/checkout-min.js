"use strict";!function(){for(var t=JSON.parse(localStorage.getItem("cart")),a=0;a<t.length;a++)i(t[a].id,t[a].img,t[a].name,t[a].price,t[a].quantity);function i(t,a,i,e,d){if(".."==a.split("/")[1]){var n=a.split("/");n.splice(0,1),a=n.join("/")}else".."!=a.split("/")[0]&&(a="../"+a);d?(e=parseFloat(e),d=parseFloat(d)):d=1,$('\n\t\t<div class="Cart__Product" id="'.concat(t,'">\n\t\t\t<div class="Product__info">\n\t\t\t\t<div class="Cart__Product__img">\n\t\t\t\t\t<img src="').concat(a,'" alt="Product">\n\t\t\t\t</div>\n\t\t\t\t<div class="Cart__Product__desc">\n\t\t\t\t\t<div class="Product__desc__Name">').concat(i,'</div>\n\t\t\t\t\t\t<div class="Product__desc__Price">').concat(e/d,'р</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="Order__quantity">').concat(d,'</div>\n\t\t\t\t<div class="Product__desc__Price--bigFormat">').concat(e,"р</div>\n\t\t\t</div>\n\t\t")).appendTo($(".Products"))}$(".Product__ship__Box").find("span").text(t[0].ship);var e=$(".Product__desc__Price--bigFormat"),d=0;for(a=0;a<e.length;a++)d+=parseFloat(e[a].innerText);var n=$(".Product__ship__Box").find("span").text(),l=t[0].cupon;l?$(".Product__total").find("span").css("display","block"):l=0,n.split(" ").map(function(t){parseFloat(t),parseFloat(t)&&(n=parseFloat(t))}),$(".Product__subtotal__Sum").text(d-l+"р"),"number"==typeof n?$(".Product__total__Sum").text(d+n-l+"р"):$(".Product__total__Sum").text(d-l+"р")}();var form=$(".Checkout__form");function addValid(t){t.removeClass("Checkout__input--invalid"),t.addClass("Checkout__input--valid")}function addInvalid(t){t.removeClass("Checkout__input--valid"),t.addClass("Checkout__input--invalid")}function checkEmail(t){var a,i=t.val().split("").indexOf("@"),e=0;if(1===t.val().split(" ").length)if(e++,-1!=i){e++;var d=t.val().split("");if([".",",","!","@","#",'"',"`","~","№","$",";","%","^",":","&","?","*","(",")","-","_","=","+","[","]","{","}","'","\\","|","/","<",">","1","2","3","4","5","6","7","8","9","0"].includes(d[i+1]))a="Первый символ после символа @ не должен быть цифрой или спецсимволом";else{var n=0;e++;for(var l=i+1;l<d.length;l++)if("."===d[l])for(var s=l+1;s<d.length;s++)n++;n>1?e++:a="Доменая зона не может быть короче 2-х символов"}}else a="Email должен содержать символ @";else a="Email не должен содержать пробелов";return{flag:e,cause:a}}function isLatinic(t){return/[a-z]/i.test(t)}form.focusout(function(t){var a=$(t.target);if("name"===a.attr("id")||"surname"===a.attr("id"))a.val().length>=3?(addValid(a),a.next().slideUp(300)):(addInvalid(a),i="name"===a.attr("id")?"Имя должно быть не менее 3-х символов":"Фамилия должна быть не менее 3-х символов",a.next().text(i).slideDown(300));else if("email"===a.attr("id"))if(4===checkEmail(a).flag)addValid(a),a.next().slideUp(300);else{addInvalid(a);var i=checkEmail(a).cause;a.next().text(i).slideDown(300)}else"tel"===a.attr("id")?a.val().length<19?(addInvalid(a),a.next().text("Номер должен состоять из 11 цифр").slideDown(300)):(addValid(a),a.next().slideUp(300)):"adress"===a.attr("id")&&(isLatinic(a.val())?(addInvalid(a),a.next().text("Адресс должен быть написан на кирилице").slideDown(300)):(addValid(a),a.next().slideUp(300)))}),function(){var t=document.querySelector(".Checkout__tel input");IMask(t,{mask:"8 ( 000 ) 000_00_00"})}();