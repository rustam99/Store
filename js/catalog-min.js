"use strict";$(document).ready(function(){var e=$(".Catalog__filter"),t=$(".Filter__list"),i=$(".Filter__text"),a={PriceFlag:!0,BrandFlag:!0,CupBrandFlag:!0,CupQuantityFlag:!0,RamQuantityFlag:!0,VideoTypeFlag:!0,HardSizeFlag:!0,SSDHardSizeFlag:!0,DVDFlag:!0},n={price:{from:"",to:"",range:""},brand:[],CupBrand:[],CupQuantity:[],RamQuantity:[],VideoType:[],HardSize:[],SSDHardSize:[],DVD:[]},s={price:function(e,t){var s=$(".PriceSettings"),l=$(".PriceRange"),o=$(".PriceCircle"),r=$(".maxPrice"),c=$(".currentPrice");a.PriceFlag?(a.PriceFlag=!1,s.slideDown(300,function(){s.css("display","flex")}),l.slideDown(300)):(s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.PriceFlag=!0}),l.slideUp(300)),s.on("input",function(e){var t=$(e.target);t.val(t.val().replace(/\D/,"")),t.closest("div").hasClass("PriceFrom")?n.price.from=t.val():t.closest("div").hasClass("PriceTo")&&(n.price.to=t.val())});var d=parseInt(r.text()),u=parseInt(c.text());function C(e){var t=l.offset(),i=e.pageX-t.left;i>=200?(o.css("left","196px"),u=d,c.text(Math.round(d)+"р")):i<=0?(o.css("left","0"),u=Math.round(d/200),c.text(Math.round(d/200)+"р")):(o.css("left",i+"px"),u=i*Math.round(d/200),c.text(Math.round(u)+"р")),n.price.range=u}c.text(Math.round(d/200)+"р"),l.on("mousedown",function(e){C(e),$(document).on("mousemove",C)}),$(document).on("mouseup",function(){$(this).off("mousemove",C)})},brand:function(e,t){var s=$(".BrandList"),o=$(".BrandList--hide"),r=$(".ShowAllBrands"),c=$(".js--ChooseAll");function d(e){(e.hasClass("BrandName")||e.hasClass("CustomCheckbox"))&&(e.closest("label").find(".CustomCheckbox").hasClass("CustomCheckbox--active")?(e.closest(".Filter__item").find(".BrandCheckbox--first").prop("checked")&&e.closest(".Filter__item").find(".BrandCheckbox--first").prop("checked",!1).next().removeClass("CustomCheckbox--active"),e.closest("label").find(".CustomCheckbox").removeClass("CustomCheckbox--active")):e.closest("label").find(".CustomCheckbox").addClass("CustomCheckbox--active")),l(e,n.brand)}a.BrandFlag?(a.BrandFlag=!1,s.slideDown(300),r.slideDown(300,function(){r.removeAttr("style"),r.removeClass("ShowAllBrands--hide")})):(s.slideUp(300,function(){s.removeAttr("style"),i.eq(t).removeClass("Filter__text--active"),a.BrandFlag=!0}),o.slideUp(300,function(){o.removeAttr("style")}),r.slideUp(300,function(){r.removeAttr("style").text("Показать все").addClass("ShowAllBrands--hide")})),r.on("click",function(){"Показать все"==r.text()?o.slideDown(300,function(){r.text("Свернуть")}):o.slideUp(300,function(){o.removeAttr("style"),r.text("Показать все")})}),c.on("click",function(){var e=$(this),t=e.closest("ul");if(e.find(".BrandCheckbox--first").prop("checked")){e.find(".CustomCheckbox--first").addClass("CustomCheckbox--active"),e.closest("ul").find(".CustomCheckbox").addClass("CustomCheckbox--active"),e.closest("ul").find(".BrandCheckbox").prop("checked",!0),e.closest(".Filter__item").find(".BrandList--hide").children().find(".CustomCheckbox").addClass("CustomCheckbox--active"),e.closest(".Filter__item").find(".BrandList--hide").children().find(".BrandCheckbox").prop("checked",!0);for(var i=1;i<t.children().length;i++)n.brand.push(t.children()[i].children[0].children[2].innerText);for(i=0;i<t.next().children().length;i++)n.brand.push(t.next().children()[i].children[0].children[2].innerText)}else e.find(".CustomCheckbox--first").removeClass("CustomCheckbox--active"),e.closest("ul").find(".CustomCheckbox").removeClass("CustomCheckbox--active"),e.closest("ul").find(".BrandCheckbox").prop("checked",!1),e.closest(".Filter__item").find(".BrandList--hide").children().find(".CustomCheckbox").removeClass("CustomCheckbox--active"),e.closest(".Filter__item").find(".BrandList--hide").children().find(".BrandCheckbox").prop("checked",!1),n.brand.length=0}),s.on("click",function(e){d($(e.target))}),o.on("click",function(e){d($(e.target))})},CupBrand:function(e,t){var s=$(".CupBrandList");a.CupBrandFlag?(a.CupBrandFlag=!1,s.slideDown(300)):(s.slideUp(300),i.eq(t).removeClass("Filter__text--active"),setTimeout(function(){a.CupBrandFlag=!0},300)),s.on("click",function(e){l($(e.target),n.CupBrand)})},CupQuantity:function(e,t){var s=$(".CupQuantityList");a.CupQuantityFlag?(a.CupQuantityFlag=!1,s.slideDown(300)):s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.CupQuantityFlag=!0}),s.on("click",function(e){l($(e.target),n.CupQuantity)})},RamQuantity:function(e,t){var s=$(".RamQuantityList");a.RamQuantityFlag?(a.RamQuantityFlag=!1,s.slideDown(300)):s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.RamQuantityFlag=!0}),s.on("click",function(e){l($(e.target),n.RamQuantity)})},VideoType:function(e,t){var s=$(".VideoTypeList");a.VideoTypeFlag?(a.VideoTypeFlag=!1,s.slideDown(300)):s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.VideoTypeFlag=!0}),s.on("click",function(e){l($(e.target),n.VideoType)})},HardSize:function(e,t){var s=$(".HardSizeList");a.HardSizeFlag?(a.HardSizeFlag=!1,s.slideDown(300)):s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.HardSizeFlag=!0}),s.on("click",function(e){l($(e.target),n.HardSize)})},SSDHardSize:function(e,t){var s=$(".SSDHardSizeList");a.SSDHardSizeFlag?(a.SSDHardSizeFlag=!1,s.slideDown(300)):s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.SSDHardSizeFlag=!0}),s.on("click",function(e){l($(e.target),n.SSDHardSize)})},DVD:function(e,t){var s=$(".DVDList");a.DVDFlag?(a.DVDFlag=!1,s.slideDown(300)):s.slideUp(300,function(){i.eq(t).removeClass("Filter__text--active"),a.DVDFlag=!0}),s.on("click",function(e){l($(e.target),n.DVD)})}};function l(e,t){var i=e.closest("label").find(".BrandName").text();if(e.hasClass("BrandCheckbox"))if(e[0].checked)t.push(i);else{var a=t.indexOf(i);t.splice(a,1)}}var o=!0;e.on("click",function(e){var i=$(e.target);(i.hasClass("Catalog__filter")||i.hasClass("Fitler__img")||i.hasClass("Catalog__filter__text"))&&(o?(o=!1,t.slideDown(300)):(t.slideUp(300),o=!0))}),t.on("click",function(e){var t=$(e.target),a=t.closest("li").find("span").attr("data-filter"),l=i.index(t.closest("li").find(".Filter__text"));if((t.hasClass("Filter__text")||"SPAN"==t.prop("tagName"))&&(i.eq(l).addClass("Filter__text--active"),s[a](t,l)),t.hasClass("SearchBtn")||t.hasClass("SearchBtn__text")){if(""==n.price.from&&""==n.price.to&&""==n.price.range&&0==n.brand.length&&0==n.VideoType.length&&0==n.SSDHardSize.length&&0==n.RamQuantity.length&&0==n.HardSize.length&&0==n.DVD.length&&0==n.CupQuantity.length&&0==n.CupBrand.length)return;var o=JSON.stringify(n);$.ajax({method:"POST",url:"check.php",contentType:"application/json",data:{params:o},success:function(e){console.log(e)}})}});var r=$(".Sort"),c=$(".Sort__list"),d=!0;r.on("click",function(e){var t=$(e.target);if(d)d=!1,c.slideDown(300);else{var i=t.closest("li").find("span").text();switch(i){case"По новинкам":i="news";break;case"По популярности":i="popularity";break;case"По возрастающей цене":i="risingPrice";break;case"По понижающей цене":i="loweringPrice"}""!=i&&$.ajax({method:"POST",url:"check.php",data:{sort:i},success:function(e){console.log(e)}}),c.slideUp(300,function(){d=!0})}})});